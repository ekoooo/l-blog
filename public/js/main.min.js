!function(e){e.fn.message=function(t,n){var a="emoji";2===n?a="warning":3===n&&(a="delete");var i=e('<span class="message"><i class="iconfont icon-'+a+'"></i> '+t+"</span>");e("body").append(i),i.animate({opacity:1,top:"40%"},{duration:300,done:function(){setTimeout(function(){i.animate({opacity:0,top:"0"},{duration:500,easing:"swing",done:function(){i.remove()}})},2e3)}})}}(jQuery),$(function(){$(".markdown-toc a").on("click",function(e){e.preventDefault();var t=decodeURI(this.href.split("#")[1]);$("html, body").animate({scrollTop:$('.reference-link[name="'+t+'"]').offset().top-70+"px"},{duration:500,easing:"swing"})}),function(){var e=$(".post-box").attr("data-post-id");$(".post-vote .post-vote-item").on("click",function(){if($(".post-vote-item i.active").length)$().message("您已投过票了！");else{var t=this,n=$(this).hasClass("unlike");$.ajax({type:"POST",url:(n?"/post/unlike/":"/post/like/")+e,success:function(e){if(200===e.code){var a=$(t).find("i"),i=n?$(".unlike-num"):$(".like-num");n?a.removeClass("icon-emoji").addClass("pink active icon-emoji_fill"):a.removeClass("icon-praise").addClass("pink active icon-praise_fill"),i.text(Number(i.eq(0).text())+1),$().message("投票成功！")}else $().message(e.message)},dataType:"json"})}})}(),$('.markdown-body a:not([class^="toc-level"])').attr("target","_blank"),$(".sidebar-op").on("click",function(){var e=$(".sidebar");e.attr("data-init")||$.ajax({method:"GET",url:"/sidebar",dataType:"json",success:function(t){if(200===t.code){var n=t.info;$(".author-ch-name").text(n.ch_name),$(".author-en-name").text(n.en_name),$(".collection-post-num").text(n.post_num),$(".collection-category-num").text(n.post_category_num),$(".collection-tag-num").text(n.post_tag_num);for(var a=$(".author-links"),i=0;i<n.links.length;i++)a.append('<a target="_blank" href="'+n.links[i].href+'">'+n.links[i].label+"</a>");var o=$(".friends-links");for(i=0;i<n.friends_links.length;i++)o.append('<a target="_blank" href="'+n.friends_links[i].href+'">'+n.friends_links[i].label+"</a>");e.attr("data-init","1")}else $.message(t.message)}}),$("body").toggleClass("sidebar-open")}),$(".sidebar .author-avatar img").on("mouseover mouseleave",function(e){$(this).attr("src","mouseover"===e.type?"/img/logo.gif":"/img/logo_1.png")}),$(".nav .switch").on("click",function(){$(this).parent().toggleClass("active")})});
//# sourceMappingURL=main.min.js.map
